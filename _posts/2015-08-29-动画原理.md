---
layout:     post
title:      动画原理
date:       2015-08-30 00:32:58
summary:    动画的简单实现方式
categories: jekyll
thumbnail: jekyll
tags:
 - android
---
#动画实现的几种方式
视觉是产品带给用户的直观感受，而动画又是视觉感受中非常重要的元素。所以，我们所有熟知的数字产品，从app，到视频，到游戏，无一例外少不了动画的渲染。
所以今天我就来讲一讲动画实现的几种原理。

###怎么理解动画
动画简单地讲，就是多张图片以一定的速度切换，造成“动画”的假象。
因此，我们只需要在**特定的时间**，播放**指定的图片**，一个简单的动画就产生了。

*注：这里指定的图片是广泛的概念，可能是一个对象的不同状态（如位置、缩放不同），也可能是不同的对象（不同的图像）*

动画的两个要素：状态数据，数据对应的图案。

###两个线程：1  更新线程  2 UI线程
更新线程在每帧调用更新逻辑，更新动画状态。
UI线程仅仅负责根据状态数据绘制当前图像。

###动画的两个简单分支
- 帧动画
- 属性动画

两者的实现方式相同，不同的是绘制画面需要的数据结构。
####帧动画
一个完整的帧动画，就是给定了每一帧的图像。更新数据只需要把动画状态更新到下一张图即可。
####属性动画
图像可以有以下常用状态：
- 坐标
- 缩放
- 旋转
- 透明度
- 翻转
一个属性动画可以在更新数据时对上面的某一项或几项进行更改。每一帧作对应的计算即可完成。

###一个简单的属性动画——FadeIn
接下来以一个2s的FadeIn动画作为例子简述一下

1. 理解FadeIn动画：2s内alpha值 由0到1.

以60fps为例，每帧17ms(1000ms/60).
<code>
	Thread Update:
	// 在Update线程中，每17ms调用update更新
	void update(float delta) {
		if (img.alpha <= 1) {
			img.alpha += 1 / 2000 * delta;
		} else {
			// call animation end listener
		}
	}
	Thread Draw:
	// 绘图
</code>

2. Fade速度先快后慢
有同学说，如果我想动画唰的一下出现，然后慢慢呈现，该怎么做。
其实理解了基本原理，就不是很困难了。
			// img.alpha += 1 / 2000 * delta;
			img.alpha += getSpeed(delta) * delta;
			alpha的变化值等于速度*时间嘛，因此我们只要在这**两秒内**,让速度先快后慢，并且alpha变化总值刚好为1就OK。
至于getSpeed(..)的内容，匀变速运动、变加速运动等，形式可以多种多样，利用数学计算相应帧的速度就行。

###就这么多
关于动画的基本原理，基本上就这么简单。了解了帧动画和属性动画，其它衍生的动画类型基本同理。
之后我会更加细致地讲解动画的相关内容。有兴趣的同学请继续关注。
